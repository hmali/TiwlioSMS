{% extends "base.html" %}

{% block title %}Settings - GMADP Communication Platform{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <!-- Account Information Card -->
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h5><i class="fas fa-user"></i> Account Information</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-4">
                        <strong>Current Username:</strong>
                    </div>
                    <div class="col-sm-8">
                        <span class="badge bg-primary">{{ current_username }}</span>
                    </div>
                </div>
                <hr>
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="{{ url_for('change_credentials') }}" class="btn btn-warning btn-sm">
                        <i class="fas fa-user-edit"></i> Change Username & Password
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Auto-Reply Configuration Card -->
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h5><i class="fas fa-reply"></i> Auto-Reply Settings</h5>
            </div>
            <div class="card-body">
                <p>Configure automatic replies for inbound SMS messages.</p>
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="{{ url_for('settings_auto_reply') }}" class="btn btn-success btn-sm">
                        <i class="fas fa-cog"></i> Configure Auto-Reply
                    </a>
                    <a href="{{ url_for('inbound_messages') }}" class="btn btn-outline-success btn-sm">
                        <i class="fas fa-inbox"></i> View Inbound Messages
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Twilio Configuration Card -->
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-cog"></i> Twilio Configuration</h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label for="twilio_sid" class="form-label">Account SID</label>
                        <input type="text" class="form-control" id="twilio_sid" name="twilio_sid" 
                               value="{{ current_sid }}" placeholder="AC..." required>
                        <div class="form-text">Your Twilio Account SID from the Twilio Console</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="twilio_token" class="form-label">Auth Token</label>
                        <input type="password" class="form-control" id="twilio_token" name="twilio_token" 
                               value="{{ current_token }}" placeholder="Your Auth Token" required>
                        <div class="form-text">Your Twilio Auth Token from the Twilio Console</div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Twilio Configuration
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h6><i class="fas fa-info-circle"></i> How to get Twilio credentials</h6>
            </div>
            <div class="card-body">
                <ol class="small">
                    <li>Go to <a href="https://console.twilio.com" target="_blank">Twilio Console</a></li>
                    <li>Login to your account</li>
                    <li>Find your Account SID and Auth Token on the dashboard</li>
                    <li>Copy and paste them here</li>
                </ol>
                
                <div class="alert alert-warning mt-3">
                    <small><i class="fas fa-exclamation-triangle"></i> Keep your credentials secure and never share them!</small>
                </div>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h6><i class="fas fa-phone"></i> Phone Number Format</h6>
            </div>
            <div class="card-body">
                <p class="small">Supported phone number formats:</p>
                <ul class="small">
                    <li>+1234567890</li>
                    <li>+12345678901</li>
                    <li>1234567890 (will be formatted)</li>
                </ul>
                <div class="alert alert-info mt-2">
                    <small><i class="fas fa-info-circle"></i> Make sure you have a verified Twilio phone number to send from!</small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
